syntax = "proto3";

option go_package = ".";

service MigratorService {
    // When migctl creates a migration job, it will use this method.
    rpc CreateMigrationJob (CreateMigrationJobRequest) returns (CreateMigrationJobResponse);

    // When the migrationd wants to share the migration with it's peer it uses this method.
    rpc ShareMigrationJob (ShareMigrationJobRequest) returns (ShareMigrationJobResponse);
}

message CreateMigrationJobRequest {
    string peer_address = 1;
    int32 peer_port = 2;
    string container_id = 3;
}

message CreateMigrationJobResponse {
    bool accepted = 1;
}

// Client sends this to server
message ShareMigrationJobRequest {
    string peer_address = 1;
    int32 peer_port = 2;
    string container_id = 3;
    string container_image = 4;
    string container_name = 5;
}

message ShareMigrationJobResponse {
    string migration_id = 1;
    bool accepted = 2;
    int64 creaton_unix_time = 3;
}